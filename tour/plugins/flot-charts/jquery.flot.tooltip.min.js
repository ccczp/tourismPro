/*
 * jquery.flot.tooltip
 * 
 * description: easy-to-use tooltips for Flot charts
 * version: 0.7
 * modified by Avi Kohn
 * 
 * built on 2013-07-31
*/ 
(function(d){var c=function(b){this.tipPosition={x:0,y:0};this.init(b)};c.prototype.init=function(b){var a=this;b.hooks.bindEvents.push(function(b,d){a.plotOptions=b.getOptions();if(!1!==a.plotOptions.tooltip&&"undefined"!==typeof a.plotOptions.tooltip){a.tooltipOptions=a.plotOptions.tooltipOpts;var c=a.getDomElement(b.getPlaceholder());b.getPlaceholder().bind("plothover",function(d,f,e){if(e){if(d=a.stringFormat(a.tooltipOptions.content,e),c.html(d),a.updateTooltipPosition({x:e.pageX-b.getPlaceholder().offset().left,y:e.pageY-b.getPlaceholder().offset().top},b.getPlaceholder()),c.css({left:a.tipPosition.x+a.tooltipOptions.shifts.x,top:a.tipPosition.y+a.tooltipOptions.shifts.y}).show(),"function"===typeof a.tooltipOptions.onHover)a.tooltipOptions.onHover(e,c)}else c.hide().html("")})}})};c.prototype.getDomElement=function(b){var a;0<d("#flotTip").length?a=d("#flotTip"):(a=d("<div />").attr("id","flotTip"),a.appendTo(b).hide().css({position:"absolute"}));return a};c.prototype.updateTooltipPosition=function(b,a){var c=d("#flotTip").outerWidth()/2,f=d("#flotTip").outerHeight();a.outerWidth();a.outerHeight();this.tipPosition.x=b.x-c+this.tooltipOptions.shifts.x;for(this.tipPosition.y=b.y-f-15+this.tooltipOptions.shifts.y;this.tipPosition.x+2*c>a.outerWidth();)this.tipPosition.x--;for(;this.tipPosition.y+f>a.outerHeight();)this.tipPosition.y--;0>this.tipPosition.x&&(this.tipPosition.x=0);0>this.tipPosition.y&&(this.tipPosition.y=b.y+15+this.tooltipOptions.shifts.y)};c.prototype.stringFormat=function(b,a){return b=b(a.series.label,a.series.data[a.dataIndex][0],a.series.data[a.dataIndex][1])};d.plot.plugins.push({init:function(b){new c(b)},options:{tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",shifts:{x:0,y:0},onHover:function(b,a){}}},name:"tooltip",version:"0.7"})})(jQuery);
